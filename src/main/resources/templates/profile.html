<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
  <title>CookHub</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" th:href="@{https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css}">
  <link rel="stylesheet" th:href="@{css/styles.css}">
  <link rel="stylesheet" th:href="@{css/navbar.css}">
  <link rel="stylesheet" th:href="@{css/profile.css}">
  <link href="https://fonts.googleapis.com/css?family=Pacifico|Raleway|Comfortaa" rel="stylesheet">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
  <!-- JQUERY -->
  <script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>
</head>

<body>

  <div class="container-fluid">
    <header id="navigation" th:include="html_components/navbar"></header>
    <section class="profile-page">

      <img class="profile-img" alt="" th:src="${image != null} ? ${image} : 'img/friends.png'"/> <!-- user image or default if null -->
      <p class="name" th:text="${user_name}"></p>
      <a href="#" th:if="${! myProfile}" class="btn btn-primary">Follow</a>
      <nav>
        <div class="nav nav-tabs justify-content-center" id="nav-tab" role="tablist">
          <a class="nav-item nav-link active" id="nav-posts-tab" data-toggle="tab" th:href="@{#nav-posts}" role="tab" aria-controls="nav-posts" aria-selected="true">Posts</a>
          <a class="nav-item nav-link" id="nav-followersShort-tab" data-toggle="tab" th:href="@{#nav-followersShort}" role="tab" aria-controls="nav-followersShort" aria-selected="false">Followers</a>
          <a class="nav-item nav-link" id="nav-following-tab" data-toggle="tab" th:href="@{#nav-following}" role="tab" aria-controls="nav-following" aria-selected="false">Following</a>
        </div>
      </nav>
      <div class="tab-content" id="nav-tabContent">
        <div class="tab-pane fade show active" id="nav-posts" role="tabpanel" aria-labelledby="nav-posts-tab">
          <div class="posts row">
            <div class="col-lg-4 col-md-6 col-sm-12 post" th:each="post:${posts}">
              <a th:href="@{'/post/'+${post.getId()}}"><img th:src="${post.getPostImage() != null ? post.getPostImage() : 'img/post/groceries.png'}"/></a>
              <p class="post-title" th:text="${post.getPostTitle()}"></p>
            </div>
          </div>
        </div>
        <div th:if="${myProfile}" class="tab-pane fade" id="nav-followersShort" role="tabpanel" aria-labelledby="nav-followersShort-tab">
          <div class="followersShort row">
<!--            <div class="row" th:text="${followers.size() > 0 ? followers.size()+' people follow you!' : 'No one is following you...'}"></div>-->
            <div class="col-md-3 col-sm-12" th:each="follower:${followers}">
              <a th:href="@{/profile}">
                <img alt="" th:src="${follower.userImage != null ? follower.userImage : 'img/friends.png'}">
              </a>
              <p th:text="${follower.fullName}"></p>
              <a th:text="${!followingIds.contains(follower.id) ? 'Follow' : 'Unfollow'}" class="btn btn-primary" href="#"></a>
            </div>
          </div>
        </div>
        <div th:if="${myProfile}" class="tab-pane fade" id="nav-following" role="tabpanel" aria-labelledby="nav-followersShort-tab">
          <div class="followersShort row">
<!--            <div class="row" th:text="${followings.size() > 0 ? 'You follow '+followings.size()+' person!' : 'You do not follow anyone...'}"></div>-->
            <div class="col-md-3 col-sm-12" th:each="following:${followings}">
              <a th:href="@{/profile}">
                <img alt="" th:src="${following.userImage != null ? following.userImage : 'img/friends.png'}">
              </a>
              <p th:text="${following.fullName}"></p>
              <a class="btn btn-primary" href="#">Unfollow</a>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>

  <script th:src="@{https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js}"></script>
  <script th:src="@{https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js}"></script>
</body>

</html>
